# Decentralized IoT Device Identity Registry (DID-IoT)

A full-stack Web3 + IoT reference project that registers IoT devices on Ethereum without any centralized database. It includes a Hardhat workspace for the smart contract plus a React + TailwindCSS frontend that talks directly to the blockchain via MetaMask.

## Folder Structure

```
EDI-Project/
â”œâ”€â”€ contracts/DeviceRegistry.sol
â”œâ”€â”€ scripts/deploy.js
â”œâ”€â”€ test/DeviceRegistry.js
â”œâ”€â”€ artifacts/â€¦ (auto-generated by Hardhat)
â”œâ”€â”€ env.sample
â”œâ”€â”€ frontend/ (Create React App + Tailwind)
â”‚   â”œâ”€â”€ src/components/*.jsx
â”‚   â”œâ”€â”€ src/hooks/useDeviceRegistry.js
â”‚   â”œâ”€â”€ src/utils/contract.js
â”‚   â””â”€â”€ src/abi/DeviceRegistry.json
â””â”€â”€ README.md
```

## Prerequisites

- Node.js 18+
- npm 9+
- MetaMask browser extension

## Backend (Hardhat) Setup

1. Install dependencies (already done but safe to rerun):
   ```bash
   npm install
   ```
2. Copy `env.sample` to `.env` and fill the values:
   - `SEPOLIA_RPC_URL`: HTTPS RPC endpoint (e.g., Infura/Alchemy/public RPC)
   - `PRIVATE_KEY`: Deployer wallet private key (never share or commit)
   - `ETHERSCAN_API_KEY`: Optional, only needed for contract verification
3. Useful commands:
   ```bash
   npm run compile        # hardhat compile
   npm test               # hardhat test
   npm run node           # hardhat local node
   npm run deploy:local   # deploy to local hardhat node
   npm run deploy:sepolia # deploy to Sepolia (requires funded PRIVATE_KEY)
   ```

### Running Tests

Hardhat uses Mocha + Chai through `@nomicfoundation/hardhat-toolbox`. Execute:
```bash
npm test
```

### Deployment Notes

1. Start a local node for development:
   ```bash
   npm run node
   ```
2. In another terminal, deploy:
   ```bash
   npm run deploy:local
   ```
   The script prints the deployed `DeviceRegistry` addressâ€”copy it.
3. For Sepolia, fund the deployer account, set the env vars, and run `npm run deploy:sepolia`.

## Frontend (React + Tailwind + Ethers v6)

Located in `frontend/`.

1. Install dependencies:
   ```bash
   cd frontend
   npm install
   ```
2. Create `frontend/.env` and set `REACT_APP_DEVICE_REGISTRY_ADDRESS` to the contract address you deployed.
3. Start the UI:
   ```bash
   npm start
   ```

### TailwindCSS

Configured via `tailwind.config.js` and `src/index.css`. The UI is styled with gradients, cards, and responsive layouts out of the box.

### UI Flow

1. **Connect Wallet** â€“ uses MetaMask through `BrowserProvider`. Displays the connected address.
2. **Register Device** â€“ enter a device name, the UI previews `deviceId = keccak256(owner, name)`, submits to the contract, and shows a success toast.
3. **Fetch Device by ID** â€“ paste any device ID to retrieve details (name, owner, timestamp).
4. **List My Devices** â€“ loads every device owned by the connected account and renders cards.

### MetaMask Instructions

1. Open MetaMask â†’ add the network you intend to use:
   - **Localhost**: `http://127.0.0.1:8545`, Chain ID `31337`
   - **Sepolia**: use your RPC provider URL
2. Import the same private key you used for deployment (or use one of the local node accounts).
3. After `npm start`, click **Connect MetaMask** and approve the connection prompt.

### Changing RPC / Networks

- Update `.env` (backend) with a new `SEPOLIA_RPC_URL` or any other network RPC endpoint that the contract supports.
- Update the frontend `.env` with the contract address deployed on that network.
- Restart the relevant processes so the new environment variables are loaded.

## Key Files

- `contracts/DeviceRegistry.sol` â€“ core smart contract with mappings, events, and view functions.
- `test/DeviceRegistry.js` â€“ full Chai test suite covering registration, duplicates, multi-owner support, and device listings.
- `scripts/deploy.js` â€“ Hardhat deployment script with `ethers v6` factories.
- `frontend/src/hooks/useDeviceRegistry.js` â€“ abstracts MetaMask connection + contract calls.
- `frontend/src/components/*` â€“ reusable UI components (connect button, forms, lists, notifications).

## Notes

- All smart-contract data lives fully on-chainâ€”no centralized DB or backend services.
- Comments are included across Solidity, scripts, tests, and React code for clarity.
- Artifacts (`artifacts/contracts/...`) are generated automatically via `npx hardhat compile` and already synced into the frontend (`src/abi/DeviceRegistry.json`) so the UI works immediately after deployment.

Happy hacking! ðŸš€






